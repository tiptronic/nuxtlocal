import{r as g,am as G,al as D,aj as F,Q as A,G as M,a5 as Q,o as H,a7 as J,d as $,x as K,c as h,e as k,f as P,i as O,w as U,V as B,T as X,n as L,a4 as Y,k as W,t as Z,h as ee,a3 as ne}from"./BA9SyL8H.js";function j(e){return D()?(F(e),!0):!1}function b(e){return typeof e=="function"?e():A(e)}const S=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const te=Object.prototype.toString,oe=e=>te.call(e)==="[object Object]",C=()=>{},se=ae();function ae(){var e,n;return S&&((e=window==null?void 0:window.navigator)==null?void 0:e.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((n=window==null?void 0:window.navigator)==null?void 0:n.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function ie(e){let n;function s(){return n||(n=e()),n}return s.reset=async()=>{const t=n;n=void 0,t&&await t},s}function re(e,n,s={}){const{immediate:t=!0}=s,i=g(!1);let o=null;function d(){o&&(clearTimeout(o),o=null)}function u(){i.value=!1,d()}function l(...f){d(),i.value=!0,o=setTimeout(()=>{i.value=!1,o=null,e(...f)},b(n))}return t&&(i.value=!0,S&&l()),j(u),{isPending:G(i),start:l,stop:u}}function w(e){var n;const s=b(e);return(n=s==null?void 0:s.$el)!=null?n:s}const N=S?window:void 0,R=S?window.navigator:void 0;function _(...e){let n,s,t,i;if(typeof e[0]=="string"||Array.isArray(e[0])?([s,t,i]=e,n=N):[n,s,t,i]=e,!n)return C;Array.isArray(s)||(s=[s]),Array.isArray(t)||(t=[t]);const o=[],d=()=>{o.forEach(c=>c()),o.length=0},u=(c,m,a,r)=>(c.addEventListener(m,a,r),()=>c.removeEventListener(m,a,r)),l=Q(()=>[w(n),b(i)],([c,m])=>{if(d(),!c)return;const a=oe(m)?{...m}:m;o.push(...s.flatMap(r=>t.map(y=>u(c,r,y,a))))},{immediate:!0,flush:"post"}),f=()=>{l(),d()};return j(f),f}let T=!1;function ue(e,n,s={}){const{window:t=N,ignore:i=[],capture:o=!0,detectIframe:d=!1}=s;if(!t)return C;se&&!T&&(T=!0,Array.from(t.document.body.children).forEach(a=>a.addEventListener("click",C)),t.document.documentElement.addEventListener("click",C));let u=!0;const l=a=>i.some(r=>{if(typeof r=="string")return Array.from(t.document.querySelectorAll(r)).some(y=>y===a.target||a.composedPath().includes(y));{const y=w(r);return y&&(a.target===y||a.composedPath().includes(y))}}),c=[_(t,"click",a=>{const r=w(e);if(!(!r||r===a.target||a.composedPath().includes(r))){if(a.detail===0&&(u=!l(a)),!u){u=!0;return}n(a)}},{passive:!0,capture:o}),_(t,"pointerdown",a=>{const r=w(e);u=!l(a)&&!!(r&&!a.composedPath().includes(r))},{passive:!0}),d&&_(t,"blur",a=>{setTimeout(()=>{var r;const y=w(e);((r=t.document.activeElement)==null?void 0:r.tagName)==="IFRAME"&&!(y!=null&&y.contains(t.document.activeElement))&&n(a)},0)})].filter(Boolean);return()=>c.forEach(a=>a())}function ce(){const e=g(!1),n=J();return n&&H(()=>{e.value=!0},n),e}function V(e){const n=ce();return M(()=>(n.value,!!e()))}function I(e,n={}){const{controls:s=!1,navigator:t=R}=n,i=V(()=>t&&"permissions"in t);let o;const d=typeof e=="string"?{name:e}:e,u=g(),l=()=>{o&&(u.value=o.state)},f=ie(async()=>{if(i.value){if(!o)try{o=await t.permissions.query(d),_(o,"change",l),l()}catch{u.value="prompt"}return o}});return f(),s?{state:u,isSupported:i,query:f}:u}function le(e={}){const{navigator:n=R,read:s=!1,source:t,copiedDuring:i=1500,legacy:o=!1}=e,d=V(()=>n&&"clipboard"in n),u=I("clipboard-read"),l=I("clipboard-write"),f=M(()=>d.value||o),c=g(""),m=g(!1),a=re(()=>m.value=!1,i);function r(){d.value&&x(u.value)?n.clipboard.readText().then(p=>{c.value=p}):c.value=z()}f.value&&s&&_(["copy","cut"],r);async function y(p=b(t)){f.value&&p!=null&&(d.value&&x(l.value)?await n.clipboard.writeText(p):q(p),c.value=p,m.value=!0,a.start())}function q(p){const v=document.createElement("textarea");v.value=p??"",v.style.position="absolute",v.style.opacity="0",document.body.appendChild(v),v.select(),document.execCommand("copy"),v.remove()}function z(){var p,v,E;return(E=(v=(p=document==null?void 0:document.getSelection)==null?void 0:p.call(document))==null?void 0:v.toString())!=null?E:""}function x(p){return p==="granted"||p==="prompt"}return{isSupported:f,text:c,copied:m,copy:y}}const de={class:"icon-wrapper"},fe=$({__name:"ProseCodeCopyButton",props:{content:{type:String,default:""},show:{type:Boolean,default:!1}},setup(e){const n=e,s=g(),{copy:t}=le();ue(s,()=>{o.value==="copied"&&(o.value="init")});const{prose:i}=K(),o=g("init"),d=u=>{t(n.content).then(()=>{o.value="copied"}).catch(l=>{console.warn("Couldn't copy to clipboard!",l)})};return(u,l)=>{const f=Y;return h(),k("button",{ref_key:"copyButtonRef",ref:s,class:L([(e.show||o.value==="copied")&&"show"]),onClick:d},[l[0]||(l[0]=P("span",{class:"sr-only"},"Copy to clipboard",-1)),P("span",de,[O(X,{name:"fade"},{default:U(()=>{var c,m;return[o.value==="copied"?(h(),B(f,{key:0,name:(c=A(i).copyButton)==null?void 0:c.iconCopied,size:"18",class:"copied"},null,8,["name"])):(h(),B(f,{key:1,name:(m=A(i).copyButton)==null?void 0:m.iconCopy,size:"18"},null,8,["name"]))]}),_:1})])],2)}}}),pe=W(fe,[["__scopeId","data-v-332be3e2"]]),me={key:0,class:"filename"},ye=$({__name:"ProseCode",props:{code:{type:String,default:""},language:{type:String,default:null},filename:{type:String,default:null},highlights:{type:Array,default:()=>[]}},setup(e){const n=g(!1);return(s,t)=>{const i=pe;return h(),k("div",{class:L([[`highlight-${e.language}`],"prose-code"]),onMouseenter:t[0]||(t[0]=o=>n.value=!0),onMouseleave:t[1]||(t[1]=o=>n.value=!1)},[e.filename?(h(),k("span",me,Z(e.filename),1)):ee("",!0),ne(s.$slots,"default",{},void 0,!0),O(i,{show:n.value,content:e.code,class:"copy-button"},null,8,["show","content"])],34)}}}),ge=W(ye,[["__scopeId","data-v-0df9f8d8"]]);export{ge as default};
